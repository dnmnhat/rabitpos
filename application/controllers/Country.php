<?php
 defined("\102\101\x53\x45\x50\101\x54\x48") or die("\x4e\x6f\x20\x64\x69\x72\x65\x63\x74\x20\x73\x63\162\151\160\164\40\141\x63\143\x65\x73\x73\x20\141\x6c\154\x6f\x77\x65\x64"); class Country extends MY_Controller { public function __construct() { parent::__construct(); $this->load_global(); $this->load->model("\143\157\165\156\164\162\x79\x5f\155\157\x64\x65\154", "\143\157\165\156\x74\x72\171"); } public function index() { $this->permission_check("\160\154\x61\x63\145\x73\137\166\151\x65\167"); $data = $this->data; $data["\x70\x61\147\145\x5f\164\x69\164\x6c\145"] = $this->lang->line("\143\x6f\x75\156\164\x72\x69\x65\163\137\x6c\x69\x73\x74"); $this->load->view("\143\157\x75\x6e\164\162\x79\55\154\x69\163\164", $data); } public function newcountry() { $this->form_validation->set_rules("\x63\x6f\x75\x6e\x74\162\171\x5f\156\x61\155\x65", "\x43\157\165\x6e\164\162\x79", "\x74\x72\151\x6d\x7c\x72\145\x71\x75\x69\162\x65\x64"); if ($this->form_validation->run() == TRUE) { $result = $this->country->verify_and_save(); echo $result; } else { echo "\120\x6c\145\x61\x73\145\40\x45\x6e\164\145\x72\40\143\157\x75\156\x74\162\x79\40\x6e\x61\155\145\56"; } } public function update($id) { $this->permission_check("\x70\x6c\141\143\145\163\137\x65\x64\x69\164"); $result = $this->country->get_details($id); $data = array_merge($this->data, $result); $data["\160\x61\147\145\137\164\x69\164\x6c\145"] = $this->lang->line("\x63\x6f\x75\x6e\164\162\171"); $this->load->view("\143\x6f\x75\156\x74\x72\171", $data); } public function update_country() { $this->form_validation->set_rules("\143\x6f\x75\x6e\x74\x72\x79\x5f\x6e\141\x6d\145", "\143\x6f\x75\x6e\x74\x72\x79", "\164\x72\x69\155\174\x72\145\x71\165\151\162\145\x64"); $this->form_validation->set_rules("\x71\x5f\151\144", '', "\x74\162\x69\155\x7c\x72\145\161\x75\x69\162\145\144"); if ($this->form_validation->run() == TRUE) { $result = $this->country->update_country(); echo $result; } else { echo "\120\154\145\141\163\145\x20\x45\156\x74\x65\162\x20\143\157\x75\156\164\162\x79\40\x6e\141\155\x65\x2e"; } } public function add() { $this->permission_check("\x70\154\x61\143\x65\x73\137\141\x64\x64"); $data = $this->data; $data["\160\x61\147\x65\x5f\x74\151\x74\x6c\145"] = $this->lang->line("\143\157\165\x6e\164\162\x79"); $this->load->view("\x63\157\165\156\164\162\171", $data); } public function ajax_list() { $list = $this->country->get_datatables(); $data = array(); $no = $_POST["\x73\164\x61\x72\x74"]; foreach ($list as $country) { $no++; $row = array(); $row[] = $country->country; if ($country->status == 1) { $str = "\74\x73\160\141\156\40\x6f\156\143\154\x69\x63\153\75\x27\x75\x70\x64\x61\164\x65\137\x73\x74\141\x74\165\163\x28" . $country->id . "\x2c\x30\x29\47\40\x69\144\x3d\x27\x73\160\x61\x6e\x5f" . $country->id . "\47\40\x20\143\x6c\141\x73\163\x3d\47\154\x61\x62\145\x6c\x20\x6c\x61\x62\x65\154\55\163\165\x63\x63\x65\163\163\x27\x20\163\164\171\x6c\145\x3d\x27\143\165\x72\x73\157\x72\72\160\x6f\151\x6e\164\x65\x72\x27\x3e\x41\143\164\x69\166\x65\40\74\x2f\163\x70\141\156\76"; } else { $str = "\x3c\x73\160\x61\156\40\x6f\156\x63\154\x69\x63\x6b\x3d\47\165\x70\144\x61\x74\145\x5f\163\164\x61\x74\x75\163\x28" . $country->id . "\54\61\x29\47\x20\151\144\75\47\x73\x70\x61\x6e\x5f" . $country->id . "\x27\40\40\143\x6c\141\x73\x73\75\47\x6c\x61\142\x65\x6c\40\154\x61\x62\x65\x6c\55\144\x61\156\x67\145\x72\x27\40\163\164\171\x6c\x65\75\47\143\x75\162\163\x6f\162\72\160\x6f\x69\156\x74\x65\x72\x27\76\40\111\x6e\x61\143\x74\x69\166\145\x20\74\x2f\163\x70\141\x6e\76"; } $row[] = $str; $str2 = "\x3c\x64\x69\x76\x20\143\x6c\x61\x73\x73\75\42\142\164\156\55\147\162\157\x75\x70\x22\40\x74\x69\x74\x6c\x65\75\42\126\151\145\167\x20\101\x63\143\x6f\165\156\x74\42\76\xa\11\11\11\11\11\x9\x9\11\11\x9\x3c\x61\x20\143\x6c\141\163\163\75\42\x62\x74\x6e\x20\x62\x74\156\55\160\162\151\155\x61\162\171\x20\142\x74\156\x2d\x6f\40\144\162\x6f\x70\144\x6f\x77\x6e\x2d\164\157\147\x67\x6c\145\42\x20\144\141\x74\x61\x2d\164\x6f\x67\147\154\145\75\x22\144\x72\x6f\x70\144\157\167\156\42\40\150\162\145\x66\75\42\43\x22\76\xa\x9\x9\x9\x9\x9\x9\11\x9\11\11\11\x41\143\x74\x69\x6f\156\x20\x3c\x73\x70\x61\x6e\40\x63\154\x61\163\x73\75\x22\143\x61\162\x65\164\x22\76\x3c\57\163\x70\x61\156\x3e\xa\x9\11\11\x9\x9\11\11\x9\x9\11\74\57\x61\76\12\x9\11\11\11\x9\x9\x9\x9\x9\11\74\165\x6c\x20\162\157\x6c\145\75\x22\x6d\145\156\165\42\x20\x63\x6c\141\x73\163\x3d\x22\x64\162\x6f\160\x64\157\167\x6e\55\155\x65\x6e\x75\40\x64\162\157\160\144\x6f\167\x6e\55\x6c\151\x67\150\x74\x20\x70\x75\x6c\x6c\55\162\151\x67\x68\164\x22\76"; if ($this->permissions("\x70\x6c\x61\x63\145\163\137\145\x64\151\164")) { $str2 .= "\x3c\154\151\x3e\xa\11\x9\11\11\11\x9\x9\11\x9\x9\11\11\x3c\141\40\164\151\164\x6c\x65\75\42\x45\x64\151\x74\x20\x52\145\143\157\162\144\40\x3f\42\40\150\162\x65\146\75\42\x63\157\x75\x6e\x74\x72\171\x2f\x75\160\x64\x61\x74\145\57" . $country->id . "\x22\76\12\x9\x9\x9\11\11\11\x9\11\11\x9\x9\x9\x9\x3c\151\x20\x63\154\141\163\x73\75\x22\146\x61\x20\146\141\55\x66\167\40\x66\x61\55\x65\144\x69\164\40\164\145\170\x74\x2d\x62\154\x75\x65\42\x3e\x3c\x2f\x69\76\105\144\151\164\12\11\11\x9\11\x9\x9\x9\11\x9\11\11\x9\74\57\x61\76\xa\x9\x9\11\x9\11\11\11\x9\x9\11\x9\x3c\57\x6c\151\76"; } if ($this->permissions("\x70\x6c\x61\x63\x65\163\x5f\x64\145\x6c\x65\x74\x65")) { $str2 .= "\74\x6c\x69\x3e\12\x9\11\x9\x9\11\11\11\x9\11\x9\x9\x9\74\x61\x20\163\x74\x79\x6c\x65\x3d\x22\143\x75\162\x73\157\x72\x3a\160\157\x69\x6e\164\x65\x72\x22\x20\164\x69\164\x6c\145\75\42\x44\145\x6c\x65\164\x65\x20\x52\145\143\157\162\144\x20\x3f\x22\x20\x6f\156\x63\154\x69\x63\153\x3d\x22\x64\x65\x6c\x65\164\145\137\143\x6f\x75\x6e\x74\162\x79\x28" . $country->id . "\51\42\x3e\12\x9\11\11\x9\x9\11\11\x9\x9\11\x9\x9\11\x3c\151\x20\143\x6c\141\163\x73\75\42\146\141\x20\x66\x61\55\x66\x77\x20\146\x61\x2d\x74\162\x61\163\150\x20\x74\145\170\x74\55\162\x65\144\42\76\74\x2f\x69\76\104\145\x6c\x65\x74\145\xa\11\x9\11\x9\x9\x9\x9\11\x9\x9\11\11\74\x2f\141\76\12\11\x9\11\x9\11\x9\11\11\x9\11\x9\x3c\x2f\154\x69\76\12\11\11\x9\11\x9\x9\x9\11\x9\11\11\12\11\11\x9\x9\11\11\x9\x9\11\x9\x3c\x2f\x75\154\76\xa\11\11\x9\11\11\x9\11\11\x9\74\57\144\151\x76\x3e"; } $row[] = $str2; $data[] = $row; } $output = array("\x64\162\x61\167" => $_POST["\x64\162\141\167"], "\x72\x65\143\x6f\x72\144\x73\x54\157\x74\x61\x6c" => $this->country->count_all(), "\162\x65\x63\x6f\162\144\x73\x46\151\x6c\164\145\162\x65\x64" => $this->country->count_filtered(), "\x64\x61\x74\x61" => $data); echo json_encode($output); } public function update_status() { $this->permission_check_with_msg("\160\x6c\141\x63\x65\163\x5f\145\x64\x69\x74"); $id = $this->input->post("\151\x64"); $status = $this->input->post("\x73\164\x61\x74\x75\x73"); $result = $this->country->update_status($id, $status); return $result; } public function delete_country() { $this->permission_check_with_msg("\160\x6c\141\x63\x65\x73\x5f\144\x65\154\145\164\x65"); $id = $this->input->post("\161\137\x69\x64"); $result = $this->country->delete_country($id); return $result; } }