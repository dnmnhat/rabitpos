<?php
 defined("\x42\101\x53\x45\x50\101\x54\110") or die("\116\157\40\x64\x69\162\x65\x63\164\x20\x73\143\x72\x69\x70\164\x20\141\143\143\145\x73\163\x20\141\154\154\157\167\145\x64"); class Company_model extends CI_Model { public function get_details() { $data = $this->data; $subdomain_ = getPathFolder(); $query = $this->db->query("\x73\145\154\x65\143\164\x20\52\40\146\x72\157\x6d\40\x64\x62\137\143\x6f\x6d\x70\x61\156\x79\40\x6f\x72\144\145\x72\40\142\x79\x20\x69\144\40\141\x73\143\40\x6c\151\155\x69\164\x20\61"); if ($query->num_rows() == 0) { show_404(); die; } else { $query = $query->row(); $data["\x71\137\x69\x64"] = $query->id; $data["\143\x6f\155\160\x61\x6e\171\x5f\x6e\141\x6d\x65"] = $query->company_name; $data["\167\x65\x62\163\151\164\145"] = $query->company_website; $data["\x6d\157\x62\x69\154\x65"] = $query->mobile; $data["\x70\x68\157\x6e\x65"] = $query->phone; $data["\x65\155\x61\151\154"] = $query->email; $data["\143\157\165\x6e\164\162\171"] = $query->country; $data["\x73\x74\141\164\x65"] = $query->state; $data["\143\x69\x74\x79"] = $query->city; $data["\160\157\x73\x74\x63\157\x64\145"] = $query->postcode; $data["\x61\x64\x64\x72\x65\163\163"] = $query->address; $data["\147\163\164\x69\156"] = $query->gst_no; $data["\166\x61\164"] = $query->vat_no; $data["\167\145\142\x73\151\164\145"] = $query->website; $data["\160\x61\156"] = $query->pan_no; $data["\142\141\156\153\x5f\x64\x65\164\x61\151\154\x73"] = $query->bank_details; $data["\x75\x70\x69\137\151\144"] = $query->upi_id; $data["\x63\x6f\x6d\160\141\156\171\137\154\157\147\x6f"] = !empty($query->company_logo) ? $query->company_logo : base_url("\164\150\145\x6d\145\57\x69\x6d\141\147\x65\163\x2f\156\x6f\x5f\x69\155\141\x67\x65\x32\56\x70\x6e\147"); $data["\165\160\x69\x5f\143\x6f\x64\145"] = !empty($query->upi_code) ? base_url("\x75\x70\154\157\x61\x64\163\x2f" . $subdomain_ . "\x2f\143\x6f\x6d\160\x61\156\171\x2f" . $query->upi_code) : base_url("\x74\x68\145\x6d\x65\57\151\155\141\x67\145\163\57\156\x6f\x5f\x69\x6d\x61\147\x65\x32\x2e\160\x6e\147"); $data["\x73\151\147\156\141\x74\165\162\x65"] = !empty($query->signature) ? $query->signature : base_url("\x74\x68\145\155\145\x2f\x69\x6d\141\x67\145\x73\57\x6e\157\151\x6d\x61\147\x65\x2e\x70\156\147"); $data["\x73\150\157\167\x5f\163\x69\147\156\x61\x74\x75\162\145"] = $query->show_signature; return $data; } } public function update_company() { extract($this->security->xss_clean(html_escape(array_merge($this->data, $_POST)))); $subdomain_ = getPathFolder(); $config["\154\157\x63\141\154\137\160\141\x74\x68"] = "\x2e\x2f\165\x70\x6c\x6f\141\144\x73\57" . $subdomain_ . "\x2f"; if (!is_dir($config["\x6c\157\143\x61\154\x5f\160\141\164\150"])) { if (mkdir($config["\x6c\x6f\x63\x61\154\137\160\x61\164\150"], 493, true)) { } } $config["\154\157\x63\141\x6c\137\x70\141\x74\150\137\62"] = "\x2e\x2f\165\x70\154\x6f\141\144\x73\57" . $subdomain_ . "\x2f\x63\157\x6d\x70\141\156\171\57"; if (!is_dir($config["\x6c\x6f\143\141\154\x5f\x70\141\164\150\137\62"])) { if (mkdir($config["\154\x6f\x63\x61\154\x5f\x70\141\x74\150\x5f\62"], 493, true)) { } } $company_logo = ''; if (!empty($_FILES["\x63\157\x6d\x70\141\156\x79\137\154\x6f\x67\157"]["\156\x61\x6d\145"])) { $config["\x75\x70\154\157\141\x64\x5f\x70\141\x74\150"] = "\x2e\57\x75\x70\154\157\x61\144\x73\x2f" . $subdomain_ . "\x2f\143\x6f\x6d\x70\141\156\x79\57"; $config["\141\x6c\x6c\157\x77\x65\144\137\164\x79\160\x65\x73"] = "\x67\x69\146\174\152\160\147\x7c\160\x6e\x67"; $config["\155\141\x78\x5f\163\x69\x7a\x65"] = 5000; $config["\155\141\170\137\167\x69\x64\164\150"] = 5000; $config["\x6d\x61\170\x5f\x68\x65\151\147\x68\x74"] = 5000; $this->load->library("\165\160\154\157\x61\144", $config); if (!$this->upload->do_upload("\143\x6f\155\x70\x61\156\171\x5f\154\157\x67\x6f")) { $error = array("\145\162\162\x6f\x72" => $this->upload->display_errors()); print $error["\x65\162\x72\157\162"]; die; } else { $company_logo = $subdomain_ . "\57\143\157\155\160\x61\156\x79\57" . $this->upload->data("\146\x69\x6c\x65\137\156\141\x6d\x65"); $company_logo = "\40\x2c\143\157\x6d\x70\x61\x6e\x79\137\x6c\157\147\x6f\x3d\x27{$company_logo}\47\40"; } } $upi_code = ''; if (!empty($_FILES["\165\160\x69\137\143\157\144\x65"]["\156\x61\155\x65"])) { $config["\x75\160\x6c\157\x61\x64\137\x70\x61\x74\150"] = "\x2e\57\x75\160\154\157\141\x64\163\x2f" . $subdomain_ . "\57\143\x6f\155\160\x61\x6e\171\57"; $config["\x61\154\154\x6f\167\145\x64\137\x74\171\160\x65\x73"] = "\147\151\146\174\x6a\x70\147\x7c\x70\x6e\147"; $config["\x6d\x61\x78\137\x73\x69\172\145"] = 5000; $config["\x6d\141\170\x5f\167\151\144\164\150"] = 5000; $config["\155\141\x78\137\x68\145\x69\x67\150\x74"] = 5000; $this->load->library("\165\160\154\157\141\144", $config); if (!$this->upload->do_upload("\x75\160\151\137\143\x6f\x64\x65")) { $error = array("\145\162\x72\157\x72" => $this->upload->display_errors()); print $error["\145\162\x72\x6f\x72"]; die; } else { $upi_code = $this->upload->data("\146\x69\154\145\137\x6e\141\x6d\x65"); $upi_code = "\x20\54\165\x70\151\x5f\143\x6f\x64\145\75\47{$upi_code}\47\40"; } } $signature = ''; if (!empty($_FILES["\163\151\x67\156\141\164\165\162\145"]["\x6e\x61\155\x65"])) { $config["\165\160\x6c\x6f\x61\144\x5f\160\x61\x74\x68"] = "\x2e\x2f\x75\160\154\157\x61\144\163\x2f" . $subdomain_ . "\x2f\143\157\x6d\160\141\x6e\x79\57"; $config["\x61\x6c\x6c\157\x77\145\x64\137\164\x79\x70\x65\163"] = "\x67\151\x66\174\x6a\160\x67\174\152\x70\145\147\x7c\x70\156\x67"; $config["\155\x61\x78\137\x73\151\x7a\x65"] = 5000; $config["\x6d\141\x78\x5f\x77\x69\144\x74\x68"] = 5000; $config["\155\141\170\x5f\150\145\151\147\150\164"] = 5000; $this->load->library("\x75\x70\154\x6f\141\x64", $config); if (!$this->upload->do_upload("\x73\151\147\156\141\x74\165\x72\x65")) { $error = array("\x65\x72\162\x6f\162" => $this->upload->display_errors()); return $error["\145\x72\x72\x6f\162"]; die; } else { $signature = "\165\x70\154\x6f\141\144\163\57" . $subdomain_ . "\57\143\157\x6d\160\141\156\171\x2f" . $this->upload->data("\146\x69\x6c\x65\137\156\141\155\x65"); $signature = "\x20\x2c\x73\x69\x67\x6e\x61\164\x75\162\145\75\47{$signature}\47\x20"; } } $show_signature = isset($show_signature) ? 1 : 0; $query1 = "\x75\x70\144\x61\x74\145\40\x64\142\x5f\143\157\155\x70\141\x6e\x79\x20\x73\x65\164\40\163\150\157\167\137\x73\x69\147\156\x61\164\x75\x72\145\75\x27{$show_signature}\x27\x2c\143\x6f\155\160\141\156\171\x5f\156\141\155\145\x3d\47{$company_name}\47\54\155\x6f\142\151\x6c\x65\x3d\47{$mobile}\47\x2c\160\150\157\x6e\x65\x3d\x27{$phone}\x27\54\145\155\x61\151\154\75\x27{$email}\47\54\x63\x6f\x75\x6e\164\162\171\75\47{$country}\47\x2c\163\x74\x61\x74\145\75\x27{$state}\47\54\x63\x69\164\x79\75\47{$city}\x27\x2c\160\157\163\164\x63\157\x64\x65\75\x27{$postcode}\47\x2c\x61\x64\x64\x72\x65\163\163\75\x27{$address}\47\54\147\163\x74\137\x6e\157\x3d\47{$gstin}\x27\54\166\141\164\137\x6e\x6f\x3d\47{$vat}\47\x2c\x77\x65\142\x73\151\x74\x65\75\x27{$website}\x27\54\40\160\141\156\x5f\x6e\x6f\75\47{$pan}\47\54\142\x61\156\153\137\x64\x65\164\141\151\154\163\75\47{$bank_details}\47\54\x75\x70\151\137\x69\x64\75\x27{$upi_id}\x27\40{$company_logo}\x20{$upi_code}\40{$signature}\40\x77\x68\145\x72\145\40\x69\x64\75{$q_id}"; if ($this->db->simple_query($query1)) { return "\163\x75\x63\143\x65\163\x73"; } else { return "\x66\x61\151\154\x65\144"; } } }